<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c3e50">
    <meta name="description" content="Finansowy Tracker - Aplikacja PWA do ≈õledzenia wydatk√≥w i dochod√≥w. Dodawaj transakcje, przeglƒÖdaj statystyki i zarzƒÖdzaj bud≈ºetem lokalnie (PL).">
    <meta name="keywords" content="finanse,wydatki,dochody,budzet,tracker,PWA,oszczedzanie,zarzadzanie finansami">

    <title>Finansowy Tracker</title>

    <!-- Linki do favicon -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <!-- Manifest PWA -->
    <link rel="manifest" href="manifest.json">

    <!-- Preload CSS (performance) -->
    <link rel="preload" href="css/style.css" as="style" onload="this.rel='stylesheet'">
    <link rel="preload" href="css/responsive.css" as="style" onload="this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/responsive.css">
    </noscript>
</head>
<body>
    <a class="skip-link" href="#ekran-glowny">Przejd≈∫ do zawarto≈õci</a>
    
    <!-- Przycisk szybkiego dostƒôpu (FAB) -->
    <button id="fabBtn" class="fab-button" title="Dodaj transakcjƒô" aria-label="Szybko dodaj transakcjƒô">
        <span class="fab-icon">‚ûï</span>
    </button>
    
    <!-- G≈Ç√≥wny kontener aplikacji -->
    <div id="app" class="app-container">
        <!-- Nag≈Ç√≥wek z tytu≈Çem -->
        <header class="app-header">
            <h1 class="app-title">üí∞ Finansowy Tracker</h1>
            <div class="header-status">
                <span class="sync-status" id="syncStatus" role="status" aria-live="polite">‚úì Online</span>
            </div>
        </header>
        
        <!-- G≈Ç√≥wna zawarto≈õƒá aplikacji -->
        <main class="app-main">
            <!-- EKRAN 1: G≈Å√ìWNY (Dashboard) -->
            <section id="ekran-glowny" class="ekran active">
                <div class="dashboard-content">
                    <!-- Podsumowanie finansowe -->
                    <div class="summary-container">
                        <div class="summary-card doch√≥d">
                            <span class="summary-label">Dochody:</span>
                            <span class="summary-value" id="sumaDochod√≥w">0,00 z≈Ç</span>
                        </div>
                        <div class="summary-card wydatek">
                            <span class="summary-label">Wydatki:</span>
                            <span class="summary-value" id="sumaWydatk√≥w">0,00 z≈Ç</span>
                        </div>
                        <div class="summary-card bilans">
                            <span class="summary-label">Bilans:</span>
                            <span class="summary-value" id="bilans">0,00 z≈Ç</span>
                        </div>
                    </div>
                    
                    <!-- PrzeglƒÖd bie≈ºƒÖcego miesiƒÖca -->
                    <div class="monthly-overview">
                        <div class="monthly-header">
                            <h3>PrzeglƒÖd tego miesiƒÖca</h3>
                            <span class="monthly-date" id="monthlyDate"></span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-label">Dochody</span>
                                <span class="stat-value income" id="monthlyIncome">0,00 z≈Ç</span>
                            </div>
                            <div class="monthly-stat divider"></div>
                            <div class="monthly-stat">
                                <span class="stat-label">Wydatki</span>
                                <span class="stat-value expense" id="monthlyExpense">0,00 z≈Ç</span>
                            </div>
                            <div class="monthly-stat divider"></div>
                            <div class="monthly-stat">
                                <span class="stat-label">Saldo</span>
                                <span class="stat-value" id="monthlySaldo">0,00 z≈Ç</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Lista ostatnich transakcji -->
                    <div class="recent-transactions">
                        <h2>Ostatnie transakcje</h2>
                        <div id="listaTransakcji" class="transaction-list">
                            <p class="empty-state">Brak transakcji. Dodaj nowƒÖ!</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- EKRAN 2: DODAJ TRANSAKCJƒò -->
            <section id="ekran-dodaj" class="ekran">
                <div class="form-container">
                    <h2>Dodaj nowƒÖ transakcjƒô</h2>
                    
                    <form id="formularzTransakcji" class="transaction-form">
                        <!-- Wyb√≥r typu transakcji -->
                        <div class="form-group">
                            <label for="typ">Typ transakcji:</label>
                            <select id="typ" name="typ" required>
                                <option value="wydatek">Wydatek</option>
                                <option value="doch√≥d">Doch√≥d</option>
                            </select>
                        </div>
                        
                        <!-- Wyb√≥r kategorii -->
                        <div class="form-group">
                            <label for="kategoria">Kategoria:</label>
                            <select id="kategoria" name="kategoria" required>
                                <option value="">-- Wybierz kategoriƒô --</option>
                                <optgroup label="Wydatki">
                                    <option value="jedzenie">üçî Jedzenie</option>
                                    <option value="transport">üöó Transport</option>
                                    <option value="rozrywka">üé¨ Rozrywka</option>
                                    <option value="zdrowie">‚öïÔ∏è Zdrowie</option>
                                    <option value="edukacja">üìö Edukacja</option>
                                    <option value="inne">üì¶ Inne</option>
                                </optgroup>
                                <optgroup label="Dochody">
                                    <option value="wyplata">üíº Wyp≈Çata</option>
                                    <option value="premia">üéÅ Premia</option>
                                    <option value="inwestycje">üìà Inwestycje</option>
                                    <option value="inne-dochod">üì¶ Inne</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <!-- Kwota -->
                        <div class="form-group">
                            <label for="kwota">Kwota (z≈Ç):</label>
                            <input type="number" id="kwota" name="kwota" placeholder="0.00" step="0.01" min="0" required>
                        </div>
                        
                        <!-- Data transakcji -->
                        <div class="form-group">
                            <label for="data">Data:</label>
                            <input type="date" id="data" name="data" required>
                        </div>
                        
                        <!-- Opis/Notatka -->
                        <div class="form-group">
                            <label for="opis">Opis (opcjonalnie):</label>
                            <textarea id="opis" name="opis" placeholder="Dodaj notatkƒô..." rows="4"></textarea>
                        </div>
                        
                        <!-- Przyciski -->
                        <div class="form-buttons">
                            <button type="submit" class="btn btn-primary">Dodaj transakcjƒô</button>
                            <button type="reset" class="btn btn-secondary">Wyczy≈õƒá</button>
                        </div>
                    </form>
                </div>
            </section>
            
            <!-- EKRAN 3: STATYSTYKI -->
            <section id="ekran-statystyki" class="ekran">
                <div class="statistics-container">
                    <h2>Statystyki finansowe</h2>
                    
                    <!-- Filtry statystyk -->
                    <div class="filters">
                        <div class="filter-group">
                            <label for="filterData">Wybierz datƒô:</label>
                            <input type="date" id="filterData">
                        </div>
                        <div class="filter-group">
                            <label for="filterRok">Rok:</label>
                            <input type="number" id="filterRok" min="2020" value="2025">
                        </div>
                    </div>
                    
                    <!-- Podsumowanie statystyk -->
                    <div class="stats-summary">
                        <div class="stat-card">
                            <h3>Ca≈Çkowite dochody</h3>
                            <p class="stat-value" id="statDochodyCa≈Çkowite">0,00 z≈Ç</p>
                        </div>
                        <div class="stat-card">
                            <h3>Ca≈Çkowite wydatki</h3>
                            <p class="stat-value" id="statWydatkiCa≈Çkowite">0,00 z≈Ç</p>
                        </div>
                        <div class="stat-card">
                            <h3>Saldo</h3>
                            <p class="stat-value" id="statSaldo">0,00 z≈Ç</p>
                        </div>
                    </div>
                    
                    <!-- Wykresy -->
                    <div class="charts-container">
                        <!-- Wykres ko≈Çowy wydatk√≥w po kategoriach -->
                        <div class="chart-wrapper">
                            <h3>Wydatki po kategoriach</h3>
                            <canvas id="chartWydatki" class="chart-canvas"></canvas>
                        </div>
                        
                        <!-- Wykres s≈Çupkowy dochod√≥w vs wydatk√≥w -->
                        <div class="chart-wrapper">
                            <h3>Dochody vs Wydatki</h3>
                            <canvas id="chartPortfolio" class="chart-canvas"></canvas>
                        </div>
                    </div>
                    
                    <!-- Tabela kategorii -->
                    <div class="categories-table">
                        <h3>Rozbicie po kategoriach</h3>
                        <table id="tabelaKategorii">
                            <thead>
                                <tr>
                                    <th>Kategoria</th>
                                    <th>Kwota</th>
                                    <th>Procent</th>
                                </tr>
                            </thead>
                            <tbody id="tabelaKategoriiBody">
                                <tr class="empty-row">
                                    <td colspan="3">Brak danych</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- EKRAN 4: USTAWIENIA -->
            <section id="ekran-ustawienia" class="ekran">
                <div class="settings-container">
                    <h2>Ustawienia</h2>
                    
                    <!-- Sekcja ekranu -->
                    <div class="settings-section">
                        <h3>WyglƒÖd</h3>
                        <div class="setting-item">
                            <label for="ciemnyMotyw">
                                <input type="checkbox" id="ciemnyMotyw" name="ciemnyMotyw">
                                Ciemny motyw
                            </label>
                        </div>
                    </div>
                    
                    <!-- Sekcja powiadomie≈Ñ -->
                    <div class="settings-section">
                        <h3>Powiadomienia</h3>
                        <div class="setting-item">
                            <label for="powiadomieniaWlaczone">
                                <input type="checkbox" id="powiadomieniaWlaczone" name="powiadomieniaWlaczone" checked>
                                W≈ÇƒÖcz powiadomienia
                            </label>
                        </div>
                        <div class="setting-item">
                            <label for="powiadomieniaLimitu">
                                <input type="checkbox" id="powiadomieniaLimitu" name="powiadomieniaLimitu" checked>
                                Powiadomienia o limicie wydatk√≥w
                            </label>
                        </div>
                    </div>
                    
                    <!-- Sekcja kategorii -->
                    <div class="settings-section">
                        <h3>Kategorie</h3>
                        <div class="categories-management">
                            <div class="category-group">
                                <h4>Wydatki</h4>
                                <div id="kategorieWydatki" class="category-list">
                                    <!-- Kategorie bƒôdƒÖ za≈Çadowane tutaj -->
                                </div>
                                <div class="add-category-form">
                                    <input type="text" id="newExpenseCategory" placeholder="Nowa kategoria wydatku" maxlength="30">
                                    <button type="button" id="addExpenseCategoryBtn" class="btn btn-small" onclick="App.handleAddExpenseCategory()">Dodaj</button>
                                </div>
                            </div>
                            
                            <div class="category-group">
                                <h4>Dochody</h4>
                                <div id="kategorieDochody" class="category-list">
                                    <!-- Kategorie bƒôdƒÖ za≈Çadowane tutaj -->
                                </div>
                                <div class="add-category-form">
                                    <input type="text" id="newIncomeCategory" placeholder="Nowa kategoria dochodu" maxlength="30">
                                    <button type="button" id="addIncomeCategoryBtn" class="btn btn-small" onclick="App.handleAddIncomeCategory()">Dodaj</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sekcja danych -->
                    <div class="settings-section">
                        <h3>Dane</h3>
                        <div class="setting-item">
                            <label for="limitWydatkow">Limit wydatk√≥w (z≈Ç):</label>
                            <input type="number" id="limitWydatkow" name="limitWydatkow" placeholder="0.00" step="0.01" min="0" value="3000">
                        </div>
                        <div class="setting-item">
                            <label for="waluty">Waluta:</label>
                            <select id="waluty" name="waluty">
                                <option value="PLN">PLN (Polska)</option>
                                <option value="EUR">EUR (Euro)</option>
                                <option value="USD">USD (Dollar)</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Sekcja kopii zapasowej -->
                    <div class="settings-section">
                        <h3>Kopia zapasowa</h3>
                        <div class="setting-buttons">
                            <button id="exportData" class="btn btn-primary">Eksportuj dane (JSON)</button>
                            <button id="importData" class="btn btn-secondary">Importuj dane</button>
                            <input type="file" id="fileInput" accept=".json" style="display: none;">
                        </div>
                    </div>
                    
                    <!-- Sekcja niebezpieczna -->
                    <div class="settings-section danger">
                        <h3>Opcje niebezpieczne</h3>
                        <div class="setting-buttons">
                            <button id="usunWszytkieTransakcje" class="btn btn-danger">Usu≈Ñ wszystkie transakcje</button>
                            <button id="resetDoUstawienDomyslnych" class="btn btn-danger">Reset do ustawie≈Ñ domy≈õlnych</button>
                        </div>
                    </div>
                    
                    <!-- Informacja aplikacji -->
                    <div class="settings-section info">
                        <h3>Informacja</h3>
                        <p><strong>Aplikacja:</strong> Finansowy Tracker</p>
                        <p><strong>Wersja:</strong> 1.0.0</p>
                        <p><strong>Technologia:</strong> Progressive Web App (PWA)</p>
                        <p><strong>Praca offline:</strong> ‚úì Obs≈Çugiwana</p>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Nawigacja dolna w stopce (semantyka) -->
        <footer class="app-footer" role="contentinfo">
            <nav class="app-navigation" role="navigation" aria-label="Dolna nawigacja aplikacji">
                <button class="nav-btn active" data-ekran="ekran-glowny" title="G≈Ç√≥wny" aria-label="G≈Ç√≥wny ekran">
                    <span class="nav-icon" aria-hidden="true">üìä</span>
                    <span class="nav-label">G≈Ç√≥wny</span>
                </button>
                <button class="nav-btn" data-ekran="ekran-dodaj" title="Dodaj" aria-label="Dodaj transakcjƒô">
                    <span class="nav-icon" aria-hidden="true">‚ûï</span>
                    <span class="nav-label">Dodaj</span>
                </button>
                <button class="nav-btn" data-ekran="ekran-statystyki" title="Statystyki" aria-label="Statystyki">
                    <span class="nav-icon" aria-hidden="true">üìà</span>
                    <span class="nav-label">Statystyki</span>
                </button>
                <button class="nav-btn" data-ekran="ekran-ustawienia" title="Ustawienia" aria-label="Ustawienia">
                    <span class="nav-icon" aria-hidden="true">‚öôÔ∏è</span>
                    <span class="nav-label">Ustawienia</span>
                </button>
            </nav>
            <div class="footer-info">
                <small>Finansowy Tracker ‚Ä¢ Wersja 1.0.0 ‚Ä¢ Dzia≈Ça offline</small>
            </div>
        </footer>
    </div>
    
    <!-- Kontener powiadomie≈Ñ -->
    <div id="notificationsContainer" class="notifications-container"></div>
    
    <!-- Skrypty JavaScript -->
    <script src="js/database.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Rejestracja Service Workera -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => {
                        console.log('Service Worker zarejestrowany:', reg);
                    })
                    .catch(err => {
                        console.log('B≈ÇƒÖd rejestracji Service Worker:', err);
                    });
            });
        }
        
        // Monitorowanie statusu po≈ÇƒÖczenia
        window.addEventListener('online', () => {
            document.getElementById('syncStatus').textContent = '‚úì Online';
            document.getElementById('syncStatus').className = 'sync-status online';
        });
        
        window.addEventListener('offline', () => {
            document.getElementById('syncStatus').textContent = '‚Üª Offline';
            document.getElementById('syncStatus').className = 'sync-status offline';
        });
        
        // Inicjalizacja daty dzisiejszej w formularzu
        document.addEventListener('DOMContentLoaded', () => {
            const dateInput = document.getElementById('data');
            const dzisiaj = new Date().toISOString().split('T')[0];
            dateInput.value = dzisiaj;
        });
    </script>
</body>
</html>
